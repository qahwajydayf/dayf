<!doctype html>
<html lang="ar-SA" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />

  <title>قهوجي الطائف — جاري تحويلك…</title>
  <meta name="description" content="قهوجي الطائف — جاري تحويلك إلى الموقع الرسمي." />
  <meta name="robots" content="noindex,nofollow,noarchive" />
  <meta name="theme-color" content="#1a1612" />

  <!-- (اختياري) تحويل احتياطي لو JS مغلق -->
  <meta http-equiv="refresh" content="7;url=https://qahawaji.vercel.app/" />

  <style>
    :root{
      --bg0:#0f0d0b;
      --bg1:#1a1612;
      --gold:#d4af37;
      --gold2:#f4e4c1;
      --brand:#8b4513;
      --txt:#f7f3ee;
      --muted:rgba(247,243,238,.72);
      --glass:rgba(255,255,255,.06);
      --line:rgba(255,255,255,.10);
      --shadow: 0 18px 60px rgba(0,0,0,.45);
      --radius:24px;
    }

    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family: system-ui,-apple-system,"Cairo","Tajawal",Arial,sans-serif;
      background:
        radial-gradient(circle at 20% 25%, rgba(212,175,55,.18), transparent 55%),
        radial-gradient(circle at 80% 80%, rgba(139,69,19,.18), transparent 60%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      color:var(--txt);
      overflow:hidden;
    }

    .noise{
      position:fixed; inset:0;
      pointer-events:none;
      opacity:.07;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='140' height='140'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='140' height='140' filter='url(%23n)' opacity='.55'/%3E%3C/svg%3E");
      mix-blend-mode:overlay;
    }

    .wrap{
      min-height:100%;
      display:grid;
      place-items:center;
      padding:24px;
    }

    .card{
      width:min(920px, 100%);
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.03));
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
      position:relative;
    }

    .glow{
      position:absolute;
      inset:-120px;
      background:
        radial-gradient(circle at 30% 30%, rgba(212,175,55,.28), transparent 55%),
        radial-gradient(circle at 70% 80%, rgba(139,69,19,.24), transparent 60%);
      filter: blur(18px);
      opacity:.8;
      animation: drift 8s ease-in-out infinite alternate;
      pointer-events:none;
    }

    @keyframes drift{
      from{ transform: translate3d(-10px,-8px,0) scale(1); opacity:.78;}
      to{ transform: translate3d(12px,10px,0) scale(1.03); opacity:.92;}
    }

    .content{
      position:relative;
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap:22px;
      padding:34px;
      align-items:center;
    }

    @media (max-width: 860px){
      .content{ grid-template-columns: 1fr; padding:26px; text-align:center; }
    }

    .brandline{
      display:flex;
      gap:12px;
      align-items:center;
      margin-bottom:14px;
    }
    @media (max-width: 860px){
      .brandline{ justify-content:center; }
    }

    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 12px;
      border-radius:999px;
      border:1px solid rgba(212,175,55,.28);
      background: rgba(212,175,55,.10);
      color: var(--gold2);
      font-weight:700;
      font-size:13px;
      letter-spacing:.4px;
    }
    .dot{
      width:8px;height:8px;border-radius:999px;
      background: linear-gradient(135deg, var(--gold), var(--gold2));
      box-shadow:0 0 0 6px rgba(212,175,55,.15);
      animation: pulse 1.7s ease-in-out infinite;
    }
    @keyframes pulse{
      0%,100%{ transform:scale(1); opacity:1;}
      50%{ transform:scale(1.25); opacity:.7;}
    }

    h1{
      font-size: clamp(28px, 4vw, 44px);
      line-height:1.18;
      margin-bottom:12px;
      letter-spacing:-.4px;
    }
    h1 .gold{
      background: linear-gradient(135deg, var(--gold), var(--gold2));
      -webkit-background-clip:text;
      background-clip:text;
      -webkit-text-fill-color:transparent;
    }

    p{
      color: var(--muted);
      font-size: 16px;
      line-height:1.9;
      margin-bottom:18px;
    }

    .actions{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      align-items:center;
    }
    @media (max-width: 860px){
      .actions{ justify-content:center; }
    }

    .btn{
      appearance:none;
      border:none;
      cursor:pointer;
      padding:12px 18px;
      border-radius:999px;
      font-weight:800;
      transition:transform .18s ease, box-shadow .18s ease, background .18s ease, border-color .18s ease;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      gap:8px;
      white-space:nowrap;
    }
    .btn:active{ transform: scale(.98); }

    .btn-primary{
      background: linear-gradient(135deg, var(--brand), #d4a574);
      color:#fff;
      box-shadow: 0 16px 40px rgba(139,69,19,.34);
    }
    .btn-primary:hover{ transform: translateY(-2px); box-shadow: 0 22px 54px rgba(139,69,19,.44); }

    .btn-ghost{
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.14);
      color: #fff;
    }
    .btn-ghost:hover{ background: rgba(255,255,255,.09); transform: translateY(-2px); }

    .progress{
      margin-top:16px;
      width: min(520px,100%);
      height: 12px;
      border-radius:999px;
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.10);
      overflow:hidden;
      position:relative;
    }
    .bar{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(212,175,55,.85), rgba(244,228,193,.95));
      box-shadow: 0 0 30px rgba(212,175,55,.22);
      border-radius:999px;
      transition: width .12s linear;
    }
    .hint{
      margin-top:10px;
      font-size: 13px;
      color: rgba(247,243,238,.62);
    }

    /* ====== Dallah animation area ====== */
    .art{
      position:relative;
      display:grid;
      place-items:center;
      min-height: 320px;
      border-radius: calc(var(--radius) - 6px);
      background:
        radial-gradient(circle at 50% 50%, rgba(255,255,255,.06), transparent 62%),
        linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.10);
      overflow:hidden;
    }

    .spark{
      position:absolute;
      width: 240px;
      height: 240px;
      border-radius: 999px;
      background: radial-gradient(circle, rgba(212,175,55,.22), transparent 58%);
      filter: blur(10px);
      animation: floaty 4.8s ease-in-out infinite alternate;
      opacity:.85;
    }
    @keyframes floaty{
      from{ transform: translate(-18px,-10px) scale(.98); }
      to{ transform: translate(18px,14px) scale(1.04); }
    }

    svg{ width:min(360px, 95%); height:auto; }

    /* coffee stream */
    .stream{
      transform-origin: top;
      animation: pour 1.4s ease-in-out infinite;
      opacity:.95;
    }
    @keyframes pour{
      0%,25%{ transform: scaleY(0); opacity:0; }
      35%,75%{ transform: scaleY(1); opacity:1; }
      100%{ transform: scaleY(0); opacity:0; }
    }

    /* subtle tilt */
    .dallah{
      transform-origin: 55% 55%;
      animation: tilt 1.4s ease-in-out infinite;
      filter: drop-shadow(0 18px 28px rgba(0,0,0,.35));
    }
    @keyframes tilt{
      0%,25%{ transform: rotate(0deg) translateY(0); }
      45%,70%{ transform: rotate(-8deg) translateY(-2px); }
      100%{ transform: rotate(0deg) translateY(0); }
    }

    /* cup glow */
    .cupGlow{
      animation: cup 1.4s ease-in-out infinite;
      transform-origin: center;
    }
    @keyframes cup{
      0%,35%{ opacity:.35; transform: scale(.98); }
      55%,75%{ opacity:.65; transform: scale(1.02); }
      100%{ opacity:.35; transform: scale(.98); }
    }

    /* reduce motion */
    @media (prefers-reduced-motion: reduce){
      .glow, .spark, .dallah, .stream, .dot, .cupGlow{ animation:none !important; }
      .bar{ transition:none; }
    }

    /* footer strip */
    .strip{
      padding:14px 18px;
      border-top:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
      color: rgba(247,243,238,.68);
      font-size: 13px;
      position:relative;
    }
    .strip a{
      color: rgba(244,228,193,.92);
      text-decoration: none;
      font-weight: 800;
    }
    .strip a:hover{ text-decoration: underline; }
  </style>
</head>

<body>
  <div class="noise" aria-hidden="true"></div>

  <div class="wrap">
    <div class="card" role="region" aria-label="صفحة تحويل قهوجي الطائف">
      <div class="glow" aria-hidden="true"></div>

      <div class="content">
        <div>
          <div class="brandline">
            <span class="badge"><span class="dot"></span> قهوجي الطائف • تحويل آمن</span>
          </div>

          <h1>أهلًا بك في <span class="gold">قهوجي الطائف</span>…</h1>
          <p>
            جارٍ تجهيز الصفحة وتحويلك إلى الموقع الرسمي خلال ثوانٍ،
            إذا لم يتم التحويل تلقائيًا اضغط زر الانتقال الآن.
          </p>

          <div class="actions">
            <a class="btn btn-primary" id="goNow" href="https://qahawaji.vercel.app/" rel="noopener">
              الانتقال الآن
              <span aria-hidden="true">↩</span>
            </a>

            <button class="btn btn-ghost" id="cancel" type="button">
              إيقاف التحويل
              <span aria-hidden="true">⏸</span>
            </button>
          </div>

          <div class="progress" aria-label="شريط التحويل">
            <div class="bar" id="bar"></div>
          </div>

          <div class="hint" id="hint">سيتم التحويل خلال <span id="sec">5</span> ثوانٍ…</div>
        </div>
<div class="art" aria-hidden="true">
  <div class="spark"></div>

  <canvas id="dallahCanvas" width="560" height="380" style="width:min(360px, 95%); height:auto;"></canvas>

  <noscript style="display:block; padding:14px; color:rgba(247,243,238,.8); font-weight:700;">
    يلزم تفعيل JavaScript لعرض تأثير الدلّة.
  </noscript>
</div>


        </div>
      </div>

      <div class="strip">
        <span>إذا واجهت مشكلة: افتح الرابط يدويًا</span>
        <a href="https://qahawaji.vercel.app/" rel="noopener">qahawaji.vercel.app</a>
      </div>
    </div>
  </div>

  <script>
    (function(){
      const TARGET = "https://qahawaji.vercel.app/";
      const DURATION_MS = 5200; // مدة الانتظار قبل التحويل
      const bar = document.getElementById("bar");
      const secEl = document.getElementById("sec");
      const hint = document.getElementById("hint");
      const cancelBtn = document.getElementById("cancel");
      const goNow = document.getElementById("goNow");

      let start = performance.now();
      let raf = null;
      let canceled = false;

      function tick(now){
        if (canceled) return;
        const elapsed = now - start;
        const p = Math.min(1, elapsed / DURATION_MS);
        bar.style.width = (p * 100).toFixed(1) + "%";

        const remain = Math.max(0, Math.ceil((DURATION_MS - elapsed) / 1000));
        secEl.textContent = remain;

        if (p >= 1){
          window.location.replace(TARGET);
          return;
        }
        raf = requestAnimationFrame(tick);
      }

      raf = requestAnimationFrame(tick);

      cancelBtn.addEventListener("click", function(){
        canceled = true;
        if (raf) cancelAnimationFrame(raf);
        hint.textContent = "تم إيقاف التحويل. يمكنك الانتقال يدويًا عبر زر (الانتقال الآن).";
        cancelBtn.disabled = true;
        cancelBtn.style.opacity = ".6";
      });

      goNow.addEventListener("click", function(){
        // مكانه هنا فقط لتحسين التجربة (يضمن الانتقال حتى لو توقف الأنيميشن)
        window.location.href = TARGET;
      });

      // دعم: إذا كانت الصفحة داخل iframe، افتح بالخارج
      try{
        if (window.top !== window.self){
          window.top.location.href = TARGET;
        }
      }catch(e){}
            // =========================================================
      // Canvas Arabic Dallah (بديل للـ SVG) - مضمون
      // =========================================================
      (function initDallahCanvas(){
        const c = document.getElementById("dallahCanvas");
        if (!c) return;
        const ctx = c.getContext("2d");
        if (!ctx) return;

        const W = c.width, H = c.height;

        function clear(){
          ctx.clearRect(0,0,W,H);
        }

        function glow(x,y,rx,ry,alpha){
          ctx.save();
          ctx.globalAlpha = alpha;
          ctx.fillStyle = "rgba(212,175,55,0.18)";
          ctx.beginPath();
          ctx.ellipse(x,y,rx,ry,0,0,Math.PI*2);
          ctx.fill();
          ctx.restore();
        }

        function roundedRect(x,y,w,h,r,fill,stroke){
          ctx.beginPath();
          ctx.moveTo(x+r,y);
          ctx.arcTo(x+w,y,x+w,y+h,r);
          ctx.arcTo(x+w,y+h,x,y+h,r);
          ctx.arcTo(x,y+h,x,y,r);
          ctx.arcTo(x,y,x+w,y,r);
          if (fill){ ctx.fillStyle = fill; ctx.fill(); }
          if (stroke){ ctx.strokeStyle = stroke; ctx.lineWidth = 2; ctx.stroke(); }
        }

        function drawCup(){
          // glow under cup
          glow(410, 320, 95, 38, 1);

          // cup body
          ctx.save();
          ctx.strokeStyle = "rgba(255,255,255,0.18)";
          ctx.fillStyle   = "rgba(255,255,255,0.08)";
          roundedRect(345, 235, 150, 95, 18, ctx.fillStyle, ctx.strokeStyle);

          // cup handle
          ctx.strokeStyle = "rgba(244,228,193,0.75)";
          ctx.lineWidth = 8;
          ctx.lineCap = "round";
          ctx.beginPath();
          ctx.moveTo(495, 260);
          ctx.quadraticCurveTo(555, 270, 545, 315);
          ctx.quadraticCurveTo(535, 360, 495, 350);
          ctx.stroke();

          ctx.restore();
        }

        function drawStream(on){
          if (!on) return;
          ctx.save();
          ctx.strokeStyle = "rgba(212,175,55,0.95)";
          ctx.lineWidth = 10;
          ctx.lineCap = "round";
          ctx.beginPath();
          // من رأس المنقار إلى الفنجان
          ctx.moveTo(300, 185);
          ctx.quadraticCurveTo(360, 200, 395, 220);
          ctx.quadraticCurveTo(420, 236, 430, 250);
          ctx.stroke();
          ctx.restore();
        }

        function drawDallah(angle){
          // dallah center
          const cx = 235, cy = 250;

          ctx.save();
          ctx.translate(cx, cy);
          ctx.rotate(angle);
          ctx.translate(-cx, -cy);

          // shadow
          ctx.save();
          ctx.fillStyle = "rgba(0,0,0,0.22)";
          ctx.beginPath();
          ctx.ellipse(235, 340, 175, 26, 0, 0, Math.PI*2);
          ctx.fill();
          ctx.restore();

          // body
          ctx.save();
          ctx.fillStyle = "rgba(255,255,255,0.06)";
          ctx.strokeStyle = "rgba(244,228,193,0.60)";
          ctx.lineWidth = 3;
          ctx.lineJoin = "round";
          ctx.beginPath();
          ctx.moveTo(160, 255);
          ctx.bezierCurveTo(160, 175, 205, 130, 265, 122);
          ctx.bezierCurveTo(330, 114, 375, 165, 385, 220);
          ctx.bezierCurveTo(400, 295, 355, 355, 265, 360);
          ctx.bezierCurveTo(200, 364, 165, 325, 160, 290);
          ctx.closePath();
          ctx.fill();
          ctx.stroke();
          ctx.restore();

          // neck + lid
          ctx.save();
          ctx.fillStyle = "rgba(212,175,55,0.14)";
          ctx.strokeStyle = "rgba(244,228,193,0.55)";
          ctx.lineWidth = 3;

          ctx.beginPath();
          ctx.moveTo(250, 120);
          ctx.quadraticCurveTo(235, 95, 252, 82);
          ctx.quadraticCurveTo(275, 66, 297, 84);
          ctx.quadraticCurveTo(310, 96, 302, 118);
          ctx.closePath();
          ctx.fill(); ctx.stroke();

          ctx.fillStyle = "rgba(255,255,255,0.05)";
          ctx.beginPath();
          ctx.moveTo(218, 82);
          ctx.quadraticCurveTo(275, 52, 334, 82);
          ctx.lineTo(334, 98);
          ctx.quadraticCurveTo(275, 112, 218, 98);
          ctx.closePath();
          ctx.fill(); ctx.stroke();

          // finial
          ctx.strokeStyle = "rgba(244,228,193,0.70)";
          ctx.lineWidth = 7;
          ctx.lineCap = "round";
          ctx.beginPath();
          ctx.moveTo(282, 34);
          ctx.quadraticCurveTo(305, 52, 302, 76);
          ctx.stroke();
          ctx.strokeStyle = "rgba(212,175,55,0.55)";
          ctx.lineWidth = 6;
          ctx.beginPath();
          ctx.moveTo(292, 32);
          ctx.quadraticCurveTo(305, 45, 304, 64);
          ctx.stroke();

          ctx.restore();

          // handle
          ctx.save();
          ctx.strokeStyle = "rgba(244,228,193,0.72)";
          ctx.lineWidth = 11;
          ctx.lineCap = "round";
          ctx.lineJoin = "round";
          ctx.beginPath();
          ctx.moveTo(170, 215);
          ctx.quadraticCurveTo(110, 245, 120, 305);
          ctx.quadraticCurveTo(130, 360, 200, 360);
          ctx.stroke();

          ctx.strokeStyle = "rgba(212,175,55,0.40)";
          ctx.lineWidth = 7;
          ctx.beginPath();
          ctx.moveTo(175, 235);
          ctx.quadraticCurveTo(140, 255, 145, 295);
          ctx.quadraticCurveTo(150, 330, 188, 340);
          ctx.stroke();
          ctx.restore();

          // spout (منقار)
          ctx.save();
          ctx.strokeStyle = "rgba(244,228,193,0.78)";
          ctx.lineWidth = 12;
          ctx.lineCap = "round";
          ctx.lineJoin = "round";
          ctx.beginPath();
          ctx.moveTo(300, 175);
          ctx.quadraticCurveTo(400, 118, 510, 158);
          ctx.quadraticCurveTo(545, 175, 505, 200);
          ctx.quadraticCurveTo(450, 228, 300, 190);
          ctx.stroke();

          // tip line
          ctx.strokeStyle = "rgba(212,175,55,0.55)";
          ctx.lineWidth = 7;
          ctx.beginPath();
          ctx.moveTo(505, 156);
          ctx.quadraticCurveTo(540, 170, 520, 196);
          ctx.stroke();
          ctx.restore();

          // decorative bands
          ctx.save();
          ctx.strokeStyle = "rgba(212,175,55,0.55)";
          ctx.lineWidth = 9;
          ctx.lineCap = "round";
          ctx.beginPath();
          ctx.moveTo(175, 265);
          ctx.lineTo(365, 265);
          ctx.stroke();

          ctx.strokeStyle = "rgba(244,228,193,0.30)";
          ctx.lineWidth = 7;
          ctx.beginPath();
          ctx.moveTo(190, 295);
          ctx.lineTo(350, 295);
          ctx.stroke();
          ctx.restore();

          ctx.restore(); // rotate group
        }

        let t0 = performance.now();

        function loop(now){
          const t = (now - t0) / 1000;

          // ميل لطيف مثل SVG
          const angle = (Math.sin(t * Math.PI * (1/0.7)) * 0.08) - 0.04;

          // تشغيل السكب: on/off
          const phase = (t % 1.4);
          const pouring = (phase > 0.35 && phase < 1.0);

          clear();
          drawCup();
          drawStream(pouring);
          drawDallah(angle);

          requestAnimationFrame(loop);
        }

        requestAnimationFrame(loop);
      })();

    })();
  </script>
</body>
</html>
