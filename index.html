<!doctype html>
<html lang="ar-SA" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />

  <title>قهوجي الطائف — جاري تحويلك…</title>
  <meta name="description" content="قهوجي الطائف — جاري تحويلك إلى الموقع الرسمي." />
  <meta name="robots" content="noindex,nofollow,noarchive" />
  <meta name="theme-color" content="#1a1612" />

  <!-- (اختياري) تحويل احتياطي لو JS مغلق -->
  <meta http-equiv="refresh" content="7;url=https://qahawaji.vercel.app/" />

  <style>
    :root{
      --bg0:#0f0d0b;
      --bg1:#1a1612;
      --gold:#d4af37;
      --gold2:#f4e4c1;
      --brand:#8b4513;
      --txt:#f7f3ee;
      --muted:rgba(247,243,238,.72);
      --glass:rgba(255,255,255,.06);
      --line:rgba(255,255,255,.10);
      --shadow: 0 18px 60px rgba(0,0,0,.45);
      --radius:24px;
    }

    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family: system-ui,-apple-system,"Cairo","Tajawal",Arial,sans-serif;
      background:
        radial-gradient(circle at 20% 25%, rgba(212,175,55,.18), transparent 55%),
        radial-gradient(circle at 80% 80%, rgba(139,69,19,.18), transparent 60%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      color:var(--txt);
      overflow:hidden;
    }

    .noise{
      position:fixed; inset:0;
      pointer-events:none;
      opacity:.07;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='140' height='140'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='140' height='140' filter='url(%23n)' opacity='.55'/%3E%3C/svg%3E");
      mix-blend-mode:overlay;
    }

    .wrap{
      min-height:100%;
      display:grid;
      place-items:center;
      padding:24px;
    }

    .card{
      width:min(920px, 100%);
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.03));
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
      position:relative;
    }

    .glow{
      position:absolute;
      inset:-120px;
      background:
        radial-gradient(circle at 30% 30%, rgba(212,175,55,.28), transparent 55%),
        radial-gradient(circle at 70% 80%, rgba(139,69,19,.24), transparent 60%);
      filter: blur(18px);
      opacity:.8;
      animation: drift 8s ease-in-out infinite alternate;
      pointer-events:none;
    }

    @keyframes drift{
      from{ transform: translate3d(-10px,-8px,0) scale(1); opacity:.78;}
      to{ transform: translate3d(12px,10px,0) scale(1.03); opacity:.92;}
    }

    .content{
      position:relative;
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap:22px;
      padding:34px;
      align-items:center;
    }

    @media (max-width: 860px){
      .content{ grid-template-columns: 1fr; padding:26px; text-align:center; }
    }

    .brandline{
      display:flex;
      gap:12px;
      align-items:center;
      margin-bottom:14px;
    }
    @media (max-width: 860px){
      .brandline{ justify-content:center; }
    }

    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 12px;
      border-radius:999px;
      border:1px solid rgba(212,175,55,.28);
      background: rgba(212,175,55,.10);
      color: var(--gold2);
      font-weight:700;
      font-size:13px;
      letter-spacing:.4px;
    }
    .dot{
      width:8px;height:8px;border-radius:999px;
      background: linear-gradient(135deg, var(--gold), var(--gold2));
      box-shadow:0 0 0 6px rgba(212,175,55,.15);
      animation: pulse 1.7s ease-in-out infinite;
    }
    @keyframes pulse{
      0%,100%{ transform:scale(1); opacity:1;}
      50%{ transform:scale(1.25); opacity:.7;}
    }

    h1{
      font-size: clamp(28px, 4vw, 44px);
      line-height:1.18;
      margin-bottom:12px;
      letter-spacing:-.4px;
    }
    h1 .gold{
      background: linear-gradient(135deg, var(--gold), var(--gold2));
      -webkit-background-clip:text;
      background-clip:text;
      -webkit-text-fill-color:transparent;
    }

    p{
      color: var(--muted);
      font-size: 16px;
      line-height:1.9;
      margin-bottom:18px;
    }

    .actions{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      align-items:center;
    }
    @media (max-width: 860px){
      .actions{ justify-content:center; }
    }

    .btn{
      appearance:none;
      border:none;
      cursor:pointer;
      padding:12px 18px;
      border-radius:999px;
      font-weight:800;
      transition:transform .18s ease, box-shadow .18s ease, background .18s ease, border-color .18s ease;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      gap:8px;
      white-space:nowrap;
    }
    .btn:active{ transform: scale(.98); }

    .btn-primary{
      background: linear-gradient(135deg, var(--brand), #d4a574);
      color:#fff;
      box-shadow: 0 16px 40px rgba(139,69,19,.34);
    }
    .btn-primary:hover{ transform: translateY(-2px); box-shadow: 0 22px 54px rgba(139,69,19,.44); }

    .btn-ghost{
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.14);
      color: #fff;
    }
    .btn-ghost:hover{ background: rgba(255,255,255,.09); transform: translateY(-2px); }

    .progress{
      margin-top:16px;
      width: min(520px,100%);
      height: 12px;
      border-radius:999px;
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.10);
      overflow:hidden;
      position:relative;
    }
    .bar{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(212,175,55,.85), rgba(244,228,193,.95));
      box-shadow: 0 0 30px rgba(212,175,55,.22);
      border-radius:999px;
      transition: width .12s linear;
    }
    .hint{
      margin-top:10px;
      font-size: 13px;
      color: rgba(247,243,238,.62);
    }

    /* ====== Dallah animation area ====== */
    .art{
      position:relative;
      display:grid;
      place-items:center;
      min-height: 320px;
      border-radius: calc(var(--radius) - 6px);
      background:
        radial-gradient(circle at 50% 50%, rgba(255,255,255,.06), transparent 62%),
        linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.10);
      overflow:hidden;
    }

    .spark{
      position:absolute;
      width: 240px;
      height: 240px;
      border-radius: 999px;
      background: radial-gradient(circle, rgba(212,175,55,.22), transparent 58%);
      filter: blur(10px);
      animation: floaty 4.8s ease-in-out infinite alternate;
      opacity:.85;
    }
    @keyframes floaty{
      from{ transform: translate(-18px,-10px) scale(.98); }
      to{ transform: translate(18px,14px) scale(1.04); }
    }

    svg{ width:min(360px, 95%); height:auto; }

    /* coffee stream */
    .stream{
      transform-origin: top;
      animation: pour 1.4s ease-in-out infinite;
      opacity:.95;
    }
    @keyframes pour{
      0%,25%{ transform: scaleY(0); opacity:0; }
      35%,75%{ transform: scaleY(1); opacity:1; }
      100%{ transform: scaleY(0); opacity:0; }
    }

    /* subtle tilt */
    .dallah{
      transform-origin: 55% 55%;
      animation: tilt 1.4s ease-in-out infinite;
      filter: drop-shadow(0 18px 28px rgba(0,0,0,.35));
    }
    @keyframes tilt{
      0%,25%{ transform: rotate(0deg) translateY(0); }
      45%,70%{ transform: rotate(-8deg) translateY(-2px); }
      100%{ transform: rotate(0deg) translateY(0); }
    }

    /* cup glow */
    .cupGlow{
      animation: cup 1.4s ease-in-out infinite;
      transform-origin: center;
    }
    @keyframes cup{
      0%,35%{ opacity:.35; transform: scale(.98); }
      55%,75%{ opacity:.65; transform: scale(1.02); }
      100%{ opacity:.35; transform: scale(.98); }
    }

    /* reduce motion */
    @media (prefers-reduced-motion: reduce){
      .glow, .spark, .dallah, .stream, .dot, .cupGlow{ animation:none !important; }
      .bar{ transition:none; }
    }

    /* footer strip */
    .strip{
      padding:14px 18px;
      border-top:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
      color: rgba(247,243,238,.68);
      font-size: 13px;
      position:relative;
    }
    .strip a{
      color: rgba(244,228,193,.92);
      text-decoration: none;
      font-weight: 800;
    }
    .strip a:hover{ text-decoration: underline; }
  </style>
</head>

<body>
  <div class="noise" aria-hidden="true"></div>

  <div class="wrap">
    <div class="card" role="region" aria-label="صفحة تحويل قهوجي الطائف">
      <div class="glow" aria-hidden="true"></div>

      <div class="content">
        <div>
          <div class="brandline">
            <span class="badge"><span class="dot"></span> قهوجي الطائف • تحويل آمن</span>
          </div>

          <h1>أهلًا بك في <span class="gold">قهوجي الطائف</span>…</h1>
          <p>
            جارٍ تجهيز الصفحة وتحويلك إلى الموقع الرسمي خلال ثوانٍ،
            إذا لم يتم التحويل تلقائيًا اضغط زر الانتقال الآن.
          </p>

          <div class="actions">
            <a class="btn btn-primary" id="goNow" href="https://qahawaji.vercel.app/" rel="noopener">
              الانتقال الآن
              <span aria-hidden="true">↩</span>
            </a>

            <button class="btn btn-ghost" id="cancel" type="button">
              إيقاف التحويل
              <span aria-hidden="true">⏸</span>
            </button>
          </div>

          <div class="progress" aria-label="شريط التحويل">
            <div class="bar" id="bar"></div>
          </div>

          <div class="hint" id="hint">سيتم التحويل خلال <span id="sec">5</span> ثوانٍ…</div>
        </div>

        <div class="art" aria-hidden="true">
          <div class="spark"></div>

          <!-- Dallah + cup SVG (simple, elegant) -->
          <svg viewBox="0 0 520 420" fill="none" xmlns="http://www.w3.org/2000/svg">
            <!-- Cup glow -->
            <ellipse class="cupGlow" cx="360" cy="330" rx="92" ry="38" fill="rgba(212,175,55,.18)"/>

            <!-- Cup -->
            <path d="M300 250h120v58c0 35-28 64-64 64h-20c-36 0-64-29-64-64v-58z"
                  fill="rgba(255,255,255,.08)" stroke="rgba(255,255,255,.18)" stroke-width="2"/>
            <path d="M420 270h16c20 0 36 16 36 36s-16 36-36 36h-16"
                  stroke="rgba(244,228,193,.75)" stroke-width="8" stroke-linecap="round"/>

            <!-- Coffee stream -->
            <path class="stream" d="M238 180c38 6 70 12 94 28c12 8 18 18 18 26v26"
                  stroke="rgba(212,175,55,.95)" stroke-width="10" stroke-linecap="round"/>

            <!-- Dallah group -->
            <g class="dallah">
              <!-- Body -->
              <path d="M120 260c0-70 40-126 96-144c10-3 18-12 18-22v-8h52v10c0 10 8 18 18 22
                       c56 18 96 74 96 144c0 92-74 138-140 138S120 352 120 260z"
                    fill="rgba(255,255,255,.06)" stroke="rgba(244,228,193,.58)" stroke-width="3"/>
              <!-- Lid -->
              <path d="M214 72h92c8 0 14 6 14 14v8H200v-8c0-8 6-14 14-14z"
                    fill="rgba(212,175,55,.18)" stroke="rgba(244,228,193,.55)" stroke-width="3"/>
              <path d="M260 38c14 10 18 22 18 34" stroke="rgba(244,228,193,.65)" stroke-width="6" stroke-linecap="round"/>

              <!-- Handle -->
              <path d="M152 220c-30 18-44 46-38 76c6 30 30 54 62 60"
                    stroke="rgba(244,228,193,.65)" stroke-width="10" stroke-linecap="round"/>
              <!-- Spout -->
              <path d="M360 180c34-26 62-28 86-18c18 8 18 30-10 44c-26 12-56 6-86 0"
                    stroke="rgba(244,228,193,.70)" stroke-width="10" stroke-linecap="round"/>
              <path d="M330 170c18 16 26 34 22 52" stroke="rgba(212,175,55,.55)" stroke-width="6" stroke-linecap="round"/>

              <!-- Decorative band -->
              <path d="M168 252h224" stroke="rgba(212,175,55,.55)" stroke-width="8" stroke-linecap="round"/>
              <path d="M190 286h180" stroke="rgba(244,228,193,.30)" stroke-width="6" stroke-linecap="round"/>

              <!-- Base shadow -->
              <ellipse cx="256" cy="378" rx="158" ry="26" fill="rgba(0,0,0,.22)"/>
            </g>
          </svg>
        </div>
      </div>

      <div class="strip">
        <span>إذا واجهت مشكلة: افتح الرابط يدويًا</span>
        <a href="https://qahawaji.vercel.app/" rel="noopener">qahawaji.vercel.app</a>
      </div>
    </div>
  </div>

  <script>
    (function(){
      const TARGET = "https://qahawaji.vercel.app/";
      const DURATION_MS = 5200; // مدة الانتظار قبل التحويل
      const bar = document.getElementById("bar");
      const secEl = document.getElementById("sec");
      const hint = document.getElementById("hint");
      const cancelBtn = document.getElementById("cancel");
      const goNow = document.getElementById("goNow");

      let start = performance.now();
      let raf = null;
      let canceled = false;

      function tick(now){
        if (canceled) return;
        const elapsed = now - start;
        const p = Math.min(1, elapsed / DURATION_MS);
        bar.style.width = (p * 100).toFixed(1) + "%";

        const remain = Math.max(0, Math.ceil((DURATION_MS - elapsed) / 1000));
        secEl.textContent = remain;

        if (p >= 1){
          window.location.replace(TARGET);
          return;
        }
        raf = requestAnimationFrame(tick);
      }

      raf = requestAnimationFrame(tick);

      cancelBtn.addEventListener("click", function(){
        canceled = true;
        if (raf) cancelAnimationFrame(raf);
        hint.textContent = "تم إيقاف التحويل. يمكنك الانتقال يدويًا عبر زر (الانتقال الآن).";
        cancelBtn.disabled = true;
        cancelBtn.style.opacity = ".6";
      });

      goNow.addEventListener("click", function(){
        // مكانه هنا فقط لتحسين التجربة (يضمن الانتقال حتى لو توقف الأنيميشن)
        window.location.href = TARGET;
      });

      // دعم: إذا كانت الصفحة داخل iframe، افتح بالخارج
      try{
        if (window.top !== window.self){
          window.top.location.href = TARGET;
        }
      }catch(e){}
    })();
  </script>
</body>
</html>
